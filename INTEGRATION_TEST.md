# 学习小组App 数据库集成测试清单

## 🚀 部署步骤

### 1. 数据库初始化
- [ ] 在 Supabase Dashboard 运行 `final-database.sql`
- [ ] 确认创建了以下表：
  - users (用户表)
  - study_groups (群组表) 
  - group_members (成员关系表)
  - chat_messages (消息表)
- [ ] 确认插入了测试数据

### 2. 云函数部署
- [ ] 在 HBuilderX 中上传 `learning-group-api` 云函数
- [ ] 确认上传成功
- [ ] 测试云函数连接 (action: 'ping')

### 3. 前端集成测试
- [ ] 首页：显示真实的群组统计
- [ ] 学习群组页面：显示真实数据
- [ ] 推荐群组：显示数据库中的群组
- [ ] 聊天页面：发送/接收真实消息

## 🧪 测试流程

### A. 基础连接测试
1. 启动小程序
2. 进入聊天页面
3. 点击 🔗 按钮测试连接
4. 应该看到 "连接正常" 提示

### B. 数据显示测试
1. 进入学习群组页面
2. 检查是否显示真实的群组数量
3. 点击 "推荐群组"
4. 应该看到数据库中的真实群组

### C. 消息功能测试
1. 进入任意聊天室
2. 点击 📡 按钮加载真实消息
3. 发送一条消息
4. 再次点击 📡 按钮
5. 确认新消息出现在列表中

## 📊 期望结果

### 数据库应包含：
- 5个用户 (张小明、李小红、AI助手、王小强、赵小美)
- 3个群组 (前端开发、UI设计、算法学习)
- 10+ 条群组成员关系
- 9条聊天消息

### 前端应显示：
- 学习群组页面：总成员数、活跃群组数等真实统计
- 推荐群组：显示3个真实群组
- 聊天页面：能发送和显示真实消息

## 🔧 问题排查

如果遇到问题：

1. **连接失败**
   - 检查 Supabase URL 和 Key 是否正确
   - 确认云函数已正确上传

2. **数据为空**
   - 在 Supabase Dashboard 检查表数据
   - 重新运行 `final-database.sql`

3. **发送消息失败**
   - 检查用户是否正确初始化
   - 确认群组ID格式正确

## 🎯 完成标准

✅ 所有模拟数据已替换为真实数据库数据
✅ 用户可以正常发送和接收消息  
✅ 群组列表显示真实数据
✅ 统计数据来自真实数据库
✅ 错误处理和降级方案正常工作

---

**重要提醒**：请按顺序完成部署步骤，每一步都要确认成功后再进行下一步！
